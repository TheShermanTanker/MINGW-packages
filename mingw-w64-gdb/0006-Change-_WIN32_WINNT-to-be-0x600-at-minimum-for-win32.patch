From 20a233eda337b2597502ab93a6b75bf6d0199b4d Mon Sep 17 00:00:00 2001
From: TheShermanTanker <tanksherman27@gmail.com>
Date: Fri, 16 Feb 2024 03:12:59 +0800
Subject: [PATCH] Change _WIN32_WINNT to be 0x600 at minimum for win32
 threading

Signed-off-by: TheShermanTanker <tanksherman27@gmail.com>
---
 gdbsupport/common-defs.h | 6 +++---
 gdbsupport/common.m4     | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/gdbsupport/common-defs.h b/gdbsupport/common-defs.h
index 5e8ebab..949deea 100644
--- a/gdbsupport/common-defs.h
+++ b/gdbsupport/common-defs.h
@@ -75,12 +75,12 @@
    NOTE: this must be kept in sync with common.m4.  */
 #if defined (__MINGW32__) || defined (__CYGWIN__)
 # ifdef _WIN32_WINNT
-#  if _WIN32_WINNT < 0x0501
+#  if _WIN32_WINNT < 0x0600
 #   undef _WIN32_WINNT
-#   define _WIN32_WINNT 0x0501
+#   define _WIN32_WINNT 0x0600
 #  endif
 # else
-#  define _WIN32_WINNT 0x0501
+#  define _WIN32_WINNT 0x0600
 # endif
 #endif	/* __MINGW32__ || __CYGWIN__ */
 
diff --git a/gdbsupport/common.m4 b/gdbsupport/common.m4
index baee66f..652c667 100644
--- a/gdbsupport/common.m4
+++ b/gdbsupport/common.m4
@@ -105,12 +105,12 @@ AC_DEFUN([GDB_AC_COMMON], [
   dnl NOTE: this must be kept in sync with common-defs.h.
   [[#if defined (__MINGW32__) || defined (__CYGWIN__)
     # ifdef _WIN32_WINNT
-    #  if _WIN32_WINNT < 0x0501
+    #  if _WIN32_WINNT < 0x0600
     #   undef _WIN32_WINNT
-    #   define _WIN32_WINNT 0x0501
+    #   define _WIN32_WINNT 0x0600
     #  endif
     # else
-    #  define _WIN32_WINNT 0x0501
+    #  define _WIN32_WINNT 0x0600
     # endif
     #endif	/* __MINGW32__ || __CYGWIN__ */
     #include <thread>
-- 
2.41.0

